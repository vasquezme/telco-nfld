<!DOCTYPE html>
<html>

<head>
    <title>East Coast Telco. Samples</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">

    <!-- Load Leaflet code library: see https://leafletjs.com/download.html -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css"
        integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"
        integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>

    <!-- Position the map and title with Cascading Style Sheet (CSS) -->
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            left: 0;
        }

        #map-title {
            position: relative;
            margin-top: 10px;
            margin-left: 50px;
            float: left;
            background: white;
            border: 2px solid rgba(0, 0, 0, 0.2);
            padding: 6px 8px;
            font-family: Helvetica;
            font-weight: bold;
            font-size: 24px;
            z-index: 800;
        }
    </style>
</head>

<body>

    <!-- Display the map and title with HTML division tags  -->
    <div id="map-title">East Coast Telco. Sample</div>
    <div id="map"></div>

    <!-- Create the interactive map content with JavaScript (.js) -->
    <script>

        /* Set up the initial map center and zoom level */
        var map = L.map('map', {
            center: [51.72, -57.21], // EDIT coordinates to re-center map 51.725871649571445, -57.218914742409
            zoom: 5,  // EDIT from 1 (zoomed out) to 18 (zoomed in)
            scrollWheelZoom: true
        });

        /* display basemap tiles -- see others at https://leaflet-extras.github.io/leaflet-providers/preview/ */
        L.tileLayer(
            'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { // https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}
            attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
        }).addTo(map);

        fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/st-anthony-port.geojson') // Replace with actual file URL
            .then(response => response.json()) // Parse the JSON file
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        return { color: "blue", weight: 2 }; // Set polygon color & style
                    },
                    onEachFeature: function (feature, layer) {
                        // Extract properties
                        const regionName = feature.properties.REGNAME || "Unknown Region";
                        const geoId = feature.properties.GEOID || "No GEOID Available";
                        const id = feature.properties.ID || "No ID";
        
                        // Bind popup with details
                        layer.bindPopup(`<strong>Region:</strong> ${regionName}<br><strong>GEOID:</strong> ${geoId}<br><strong>ID:</strong> ${id}`);
                    }
                }).addTo(map);
            })
            .catch(error => console.error('Error fetching GeoJSON:', error));

        fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/labrador.geojson') // Replace with actual file URL
            .then(response => response.json()) // Parse the JSON file
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        return { color: "blue", weight: 2 }; // Set polygon color & style
                    },
                    onEachFeature: function (feature, layer) {
                        // Extract properties
                        const regionName = feature.properties.REGNAME || "Unknown Region";
                        const geoId = feature.properties.GEOID || "No GEOID Available";
                        const id = feature.properties.ID || "No ID";
        
                        // Bind popup with details
                        layer.bindPopup(`<strong>Region:</strong> ${regionName}<br><strong>GEOID:</strong> ${geoId}<br><strong>ID:</strong> ${id}`);
                    }
                }).addTo(map);
            })
            .catch(error => console.error('Error fetching GeoJSON:', error));

            fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/stephenville.geojson') // Replace with actual file URL
            .then(response => response.json()) // Parse the JSON file
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        return { color: "blue", weight: 2 }; // Set polygon color & style
                    },
                    onEachFeature: function (feature, layer) {
                        // Extract properties
                        const regionName = feature.properties.REGNAME || "Unknown Region";
                        const geoId = feature.properties.GEOID || "No GEOID Available";
                        const id = feature.properties.ID || "No ID";
        
                        // Bind popup with details
                        layer.bindPopup(`<strong>Region:</strong> ${regionName}<br><strong>GEOID:</strong> ${geoId}<br><strong>ID:</strong> ${id}`);
                    }
                }).addTo(map);
            })
            .catch(error => console.error('Error fetching GeoJSON:', error));


        fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/corner-brook.geojson') // Replace with actual file URL
            .then(response => response.json()) // Parse the JSON file
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        return { color: "blue", weight: 2 }; // Set polygon color & style
                    },
                    onEachFeature: function (feature, layer) {
                        // Extract properties
                        const regionName = feature.properties.REGNAME || "Unknown Region";
                        const geoId = feature.properties.GEOID || "No GEOID Available";
                        const id = feature.properties.ID || "No ID";
        
                        // Bind popup with details
                        layer.bindPopup(`<strong>Region:</strong> ${regionName}<br><strong>GEOID:</strong> ${geoId}<br><strong>ID:</strong> ${id}`);
                    }
                }).addTo(map);
            })
            .catch(error => console.error('Error fetching GeoJSON:', error));

            fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/grand-falls.geojson') // Replace with actual file URL
            .then(response => response.json()) // Parse the JSON file
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        return { color: "blue", weight: 2 }; // Set polygon color & style
                    },
                    onEachFeature: function (feature, layer) {
                        // Extract properties
                        const regionName = feature.properties.REGNAME || "Unknown Region";
                        const geoId = feature.properties.GEOID || "No GEOID Available";
                        const id = feature.properties.ID || "No ID";
        
                        // Bind popup with details
                        layer.bindPopup(`<strong>Region:</strong> ${regionName}<br><strong>GEOID:</strong> ${geoId}<br><strong>ID:</strong> ${id}`);
                    }
                }).addTo(map);
            })
            .catch(error => console.error('Error fetching GeoJSON:', error));

                fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/avalon.geojson') // Replace with actual file URL
            .then(response => response.json()) // Parse the JSON file
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        return { color: "blue", weight: 2 }; // Set polygon color & style
                    },
                    onEachFeature: function (feature, layer) {
                        // Extract properties
                        const regionName = feature.properties.REGNAME || "Unknown Region";
                        const geoId = feature.properties.GEOID || "No GEOID Available";
                        const id = feature.properties.ID || "No ID";
        
                        // Bind popup with details
                        layer.bindPopup(`<strong>Region:</strong> ${regionName}<br><strong>GEOID:</strong> ${geoId}<br><strong>ID:</strong> ${id}`);
                    }
                }).addTo(map);
            })
            .catch(error => console.error('Error fetching GeoJSON:', error));

            fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/burin.geojson') // Replace with actual file URL
            .then(response => response.json()) // Parse the JSON file
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        return { color: "blue", weight: 2 }; // Set polygon color & style
                    },
                    onEachFeature: function (feature, layer) {
                        // Extract properties
                        const regionName = feature.properties.REGNAME || "Unknown Region";
                        const geoId = feature.properties.GEOID || "No GEOID Available";
                        const id = feature.properties.ID || "No ID";
        
                        // Bind popup with details
                        layer.bindPopup(`<strong>Region:</strong> ${regionName}<br><strong>GEOID:</strong> ${geoId}<br><strong>ID:</strong> ${id}`);
                    }
                }).addTo(map);
            })
            .catch(error => console.error('Error fetching GeoJSON:', error));

            fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/clarenville.geojson') // Replace with actual file URL
            .then(response => response.json()) // Parse the JSON file
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        return { color: "blue", weight: 2 }; // Set polygon color & style
                    },
                    onEachFeature: function (feature, layer) {
                        // Extract properties
                        const regionName = feature.properties.REGNAME || "Unknown Region";
                        const geoId = feature.properties.GEOID || "No GEOID Available";
                        const id = feature.properties.ID || "No ID";
        
                        // Bind popup with details
                        layer.bindPopup(`<strong>Region:</strong> ${regionName}<br><strong>GEOID:</strong> ${geoId}<br><strong>ID:</strong> ${id}`);
                    }
                }).addTo(map);
            })
            .catch(error => console.error('Error fetching GeoJSON:', error));

            fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/gander.geojson') // Replace with actual file URL
            .then(response => response.json()) // Parse the JSON file
            .then(data => {
                L.geoJSON(data, {
                    style: function (feature) {
                        return { color: "blue", weight: 2 }; // Set polygon color & style
                    },
                    onEachFeature: function (feature, layer) {
                        // Extract properties
                        const regionName = feature.properties.REGNAME || "Unknown Region";
                        const geoId = feature.properties.GEOID || "No GEOID Available";
                        const id = feature.properties.ID || "No ID";
        
                        // Bind popup with details
                        layer.bindPopup(`<strong>Region:</strong> ${regionName}<br><strong>GEOID:</strong> ${geoId}<br><strong>ID:</strong> ${id}`);
                    }
                }).addTo(map);
            })
            .catch(error => console.error('Error fetching GeoJSON:', error));

            fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/buffers.geojson') // Replace with actual file URL
                .then(response => response.json()) // Parse the JSON file
                .then(data => {
                    L.geoJSON(data, {
                        style: function (feature) {
                            return {
                                color: "blue", 
                                weight: 2, 
                                fillColor: "lightblue", 
                                fillOpacity: 0.4 
                            }; // Updated styling
                        },
                        onEachFeature: function (feature, layer) {
                            const properties = feature.properties || {}; // Ensure properties exist
                            
                            // Extract relevant attributes from GeoJSON
                            const fid = properties.FID || "Unknown FID";
                            const id = properties.ID || "No ID";
                            const x = properties.X || "No X";
                            const y = properties.Y || "No Y";
            
                            // Bind popup with relevant attributes
                            layer.bindPopup(`
                                <strong>FID:</strong> ${fid}<br>
                                <strong>ID:</strong> ${id}<br>
                                <strong>X:</strong> ${x}<br>
                                <strong>Y:</strong> ${y}
                            `);
                        }
                    }).addTo(map);
                })
                .catch(error => console.error('Error fetching GeoJSON:', error));

            fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/service-area.geojson') // Replace with actual file URL
                .then(response => response.json()) // Parse the JSON file
                .then(data => {
                    L.geoJSON(data, {
                        style: function (feature) {
                            return {
                                color: "green", 
                                weight: 2, 
                                fillColor: "lightgreen", 
                                fillOpacity: 0.4 
                            }; // Updated styling
                        },
                        onEachFeature: function (feature, layer) {
                            const properties = feature.properties || {}; // Ensure properties exist
                            
                            // Extract relevant attributes from GeoJSON
                            const fid = properties.FID || "Unknown FID";
                            const id = properties.ID || "No ID";
                            const x = properties.X || "No X";
                            const y = properties.Y || "No Y";
            
                            // Bind popup with relevant attributes
                            layer.bindPopup(`
                                <strong>FID:</strong> ${fid}<br>
                                <strong>ID:</strong> ${id}<br>
                                <strong>X:</strong> ${x}<br>
                                <strong>Y:</strong> ${y}
                            `);
                        }
                    }).addTo(map);
                })
                .catch(error => console.error('Error fetching GeoJSON:', error));       

        
      fetch('https://raw.githubusercontent.com/vasquezme/telco-nfld/main/towers.geojson') // Replace with actual file URL or local path
        .then(response => response.json()) // Parse the GeoJSON file
        .then(data => {
            data.features.forEach(feature => {
                // Extract coordinates from GeoJSON structure
                const longitude = feature.properties.x; // Assuming 'x' is longitude
                const latitude = feature.properties.y; // Assuming 'y' is latitude
                const towerId = feature.properties.id || "Unknown Tower"; // Extract 'id'
    
                if (latitude && longitude) {
                        const customIcon = L.icon({
                            iconUrl: 'https://raw.githubusercontent.com/vasquezme/telco-nfld/main/cell-tower-pin.svg',  // Replace with actual icon URL
                            iconSize: [64, 64],  // Adjust the size (width, height)
                            iconAnchor: [16, 32],  // Adjust where the marker clicks (center-bottom)
                            popupAnchor: [0, -32]  // Adjust popup placement
                        });
                        
                        L.marker([latitude, longitude], { icon: customIcon })
                            .addTo(map)
                            .bindPopup(`Tower ID: ${towerId}`);
                }
            });
        })
        .catch(error => console.error('Error fetching the GeoJSON:', error));  

    </script>


    </script>
</body>

</html>